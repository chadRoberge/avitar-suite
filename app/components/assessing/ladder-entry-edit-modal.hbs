{{!-- Ladder Entry Edit Modal Component --}}
<div class="avitar-modal-overlay {{if @isOpen 'avitar-modal-overlay--visible'}}" {{on "click" this.handleBackdropClick}}>
  <div class="avitar-modal avitar-modal--md">
        <div class="avitar-modal__header">
          <h3 class="avitar-modal__title">
            {{if @ladderEntry "Update Ladder Entry" "Add Ladder Entry"}}
          </h3>
          <button type="button" class="avitar-modal__close" {{on "click" @onClose}} aria-label="Close modal">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <div class="avitar-modal__body">
          {{! Trigger check for form updates }}
          {{this.formInitializer}}

          {{#if @waterBodyName}}
            <div class="avitar-alert avitar-alert--info avitar-mb-4">
              <div class="avitar-alert__icon">
                <i class="fas fa-water"></i>
              </div>
              <div class="avitar-alert__content">
                <div class="avitar-alert__message">
                  Adding ladder entry for <strong>{{@waterBodyName}}</strong>
                </div>
              </div>
            </div>
          {{/if}}

          <form {{on "submit" this.handleSubmit}}>
            <div class="avitar-form-group">
              <label class="avitar-label" for="frontage">Frontage (feet) <span class="avitar-text-danger">*</span></label>
              <input 
                type="number" 
                id="frontage"
                class="avitar-input {{if this.frontageError 'avitar-input--error'}}" 
                value={{this.frontage}} 
                {{on "input" this.updateFrontage}}
                placeholder="Enter frontage in feet..."
                step="1"
                min="1"
                max="10000"
                required
              />
              {{#if this.frontageError}}
                <div class="avitar-form-error">{{this.frontageError}}</div>
              {{/if}}
              <div class="avitar-text-xs avitar-text-muted avitar-mt-1">
                Linear feet of waterfront property
              </div>
            </div>

            <div class="avitar-form-group">
              <label class="avitar-label" for="value">Factor <span class="avitar-text-danger">*</span></label>
              <input
                type="number"
                id="value"
                class="avitar-input {{if this.valueError 'avitar-input--error'}}"
                value={{this.value}}
                {{on "input" this.updateValue}}
                placeholder="Enter factor value..."
                step="0.01"
                min="0"
                max="1000"
                required
              />
              {{#if this.valueError}}
                <div class="avitar-form-error">{{this.valueError}}</div>
              {{/if}}
              <div class="avitar-text-xs avitar-text-muted avitar-mt-1">
                Multiplication factor applied to waterfront value for this frontage
              </div>
            </div>

            {{#if this.generalError}}
              <div class="avitar-alert avitar-alert--danger avitar-mb-4">
                <div class="avitar-alert__icon">
                  <i class="fas fa-exclamation-circle"></i>
                </div>
                <div class="avitar-alert__content">
                  <div class="avitar-alert__message">{{this.generalError}}</div>
                </div>
              </div>
            {{/if}}
          </form>
        </div>

        <div class="avitar-modal__footer">
          <button 
            type="button" 
            class="avitar-btn avitar-btn--secondary" 
            {{on "click" @onClose}}
          >
            Cancel
          </button>
          <button 
            type="button" 
            class="avitar-btn avitar-btn--primary" 
            {{on "click" this.handleSubmit}}
            disabled={{this.isSaving}}
          >
            {{#if this.isSaving}}
              <i class="fas fa-spinner fa-spin avitar-mr-2"></i>
              Saving...
            {{else}}
              {{if @ladderEntry "Update" "Add"}} Entry
            {{/if}}
          </button>
        </div>
  </div>
</div>