{{page-title "Platform Verification"}}

<div class="contractor-page">
  {{! Header }}
  <div class="avitar-flex avitar-justify-between avitar-items-center avitar-mb-6">
    <div>
      <h1 class="avitar-text-3xl avitar-font-bold avitar-text-gray-900">
        {{#if this.needsOnboarding}}
          Complete Your Contractor Profile
        {{else}}
          Platform Verification
        {{/if}}
      </h1>
      <p class="avitar-text-muted avitar-mt-2">
        {{#if this.needsOnboarding}}
          Create your contractor profile to get started with permit applications and platform verification
        {{else}}
          Become a verified contractor to access premium features and fast-track permit approvals
        {{/if}}
      </p>
    </div>
    {{#if this.verification}}
      <span class={{this.statusBadgeClass}}>
        {{this.statusText}}
      </span>
    {{/if}}
  </div>

  {{! Onboarding Form - Create Contractor Profile FIRST }}
  {{#if this.needsOnboarding}}
    {{! Step Progress Indicator }}
    <div class="avitar-step-progress">
      {{! Step 1: Select Plan }}
      <div class="avitar-step-progress__step {{if (eq this.onboardingStep 1) 'avitar-step-progress__step--active' 'avitar-step-progress__step--completed'}}">
        <div class="avitar-step-progress__number">
          {{#if (gt this.onboardingStep 1)}}
            <i class="fas fa-check avitar-step-progress__icon"></i>
          {{else}}
            1
          {{/if}}
        </div>
        <div class="avitar-step-progress__label">Select Plan</div>
      </div>

      {{! Connector }}
      <div class="avitar-step-progress__connector {{if (eq this.onboardingStep 1) 'avitar-step-progress__connector--active' 'avitar-step-progress__connector--completed'}}"></div>

      {{! Step 2: Company Info }}
      <div class="avitar-step-progress__step {{if (eq this.onboardingStep 2) 'avitar-step-progress__step--active' 'avitar-step-progress__step--pending'}}">
        <div class="avitar-step-progress__number">
          2
        </div>
        <div class="avitar-step-progress__label">Company Info</div>
      </div>
    </div>

    {{! Step 1: Plan Selection }}
    {{#if (eq this.onboardingStep 1)}}
      <div class="avitar-card avitar-bg-primary-light avitar-border-primary avitar-mb-6">
        <div class="avitar-card__body avitar-p-4">
          <h2 class="avitar-text-lg avitar-font-semibold avitar-mb-3">
            <i class="fas fa-star avitar-mr-2"></i>
            Choose Your Plan
          </h2>
          <p class="avitar-mb-2">
            Select the plan that best fits your needs. You can upgrade or downgrade at any time.
          </p>
          <p class="avitar-text-sm avitar-text-muted">
            All plans include permit application submission and email notifications.
          </p>
        </div>
      </div>

      {{#if this.planCards.length}}
        <div class="avitar-grid avitar-grid-cols-2 avitar-gap-6 avitar-mb-6">
          {{#each this.planCards as |planCard|}}
            <div
              class="plan-selection-wrapper {{if (and this.selectedPlan (eq this.selectedPlan.id planCard.originalPlan.id)) 'selected-plan'}}"
              {{on "click" (fn this.selectPlan planCard)}}
              style="cursor: pointer; position: relative;"
            >
              {{! Show selected indicator }}
              {{#if (and this.selectedPlan (eq this.selectedPlan.id planCard.originalPlan.id))}}
                <div class="selected-plan-badge">
                  <i class="fas fa-check-circle"></i>
                  Selected
                </div>
              {{/if}}

              {{! Show pricing at the top }}
              <div class="plan-pricing-header avitar-text-center avitar-bg-gray-50 avitar-p-4 avitar-rounded-t">
                <div class="avitar-text-3xl avitar-font-bold avitar-text-primary avitar-mb-1">
                  {{planCard.pricing}}
                </div>
                {{#if planCard.originalPlan.pricing}}
                  <div class="avitar-text-xs avitar-text-muted">
                    per {{planCard.originalPlan.pricing.interval}}
                  </div>
                {{/if}}
              </div>

              {{! Use module card component }}
              <Shared::ModuleCard @module={{planCard}} />
            </div>
          {{/each}}
        </div>

        <div class="avitar-flex avitar-justify-end">
          <button
            type="button"
            class="avitar-btn avitar-btn--primary avitar-btn--lg"
            {{on "click" this.nextOnboardingStep}}
            disabled={{not this.canSelectPlan}}
          >
            Continue
            <i class="fas fa-arrow-right avitar-ml-2"></i>
          </button>
        </div>
      {{else}}
        <div class="avitar-card avitar-bg-warning-light avitar-border-warning avitar-mb-6">
          <div class="avitar-card__body avitar-p-4">
            <h3 class="avitar-text-lg avitar-font-semibold avitar-mb-2">
              <i class="fas fa-exclamation-triangle avitar-mr-2"></i>
              No Plans Available
            </h3>
            <p class="avitar-mb-2">
              Unable to load subscription plans. Please make sure Stripe is configured with commercial plans.
            </p>
            <p class="avitar-text-sm avitar-text-muted">
              Plans should have metadata: <code>plan_type = "commercial"</code> and <code>plan_key = "free", "premium", or "pro"</code>
            </p>
          </div>
        </div>
      {{/if}}
    {{/if}}

    {{! Step 2: Company Information }}
    {{#if (eq this.onboardingStep 2)}}

    <div class="avitar-card">
      <div class="avitar-card__header">
        <h2 class="avitar-card__title">
          <i class="fas fa-building avitar-mr-2"></i>
          Company Information
        </h2>
      </div>

      <div class="avitar-card__body">
        <div class="avitar-grid avitar-grid-cols-2 avitar-gap-6">
          {{! Company Name }}
          <div class="avitar-col-span-2">
            <label class="avitar-label">
              Company Name <span class="avitar-text-danger">*</span>
            </label>
            <input
              type="text"
              class="avitar-input"
              value={{this.onboardingData.company_name}}
              {{on "input" (fn this.updateOnboardingField "company_name")}}
              placeholder="ABC Construction LLC"
            />
          </div>

          {{! License Number }}
          <div>
            <label class="avitar-label">
              License Number <span class="avitar-text-danger">*</span>
            </label>
            <input
              type="text"
              class="avitar-input"
              value={{this.onboardingData.license_number}}
              {{on "input" (fn this.updateOnboardingField "license_number")}}
              placeholder="LIC-123456"
            />
          </div>

          {{! License State }}
          <div>
            <label class="avitar-label">
              License State <span class="avitar-text-danger">*</span>
            </label>
            <select class="avitar-select" {{on "change" (fn this.updateOnboardingField "license_state")}}>
              <option value="">Select State...</option>
              {{#each this.stateOptions as |stateOption|}}
                <option value={{stateOption.value}} selected={{eq this.onboardingData.license_state stateOption.value}}>
                  {{stateOption.label}}
                </option>
              {{/each}}
            </select>
          </div>

          {{! License Type }}
          <div>
            <label class="avitar-label">
              License Type
            </label>
            <select class="avitar-select" {{on "change" (fn this.updateOnboardingField "license_type")}}>
              {{#each this.licenseTypeOptions as |typeOption|}}
                <option value={{typeOption.value}} selected={{eq this.onboardingData.license_type typeOption.value}}>
                  {{typeOption.label}}
                </option>
              {{/each}}
            </select>
          </div>

          {{! License Expiration }}
          <div>
            <label class="avitar-label">
              License Expiration Date <span class="avitar-text-danger">*</span>
            </label>
            <input
              type="date"
              class="avitar-input"
              value={{this.onboardingData.license_expiration}}
              {{on "input" (fn this.updateOnboardingField "license_expiration")}}
            />
          </div>

          {{! Business Address }}
          <div class="avitar-col-span-2">
            <h3 class="avitar-font-semibold avitar-mb-3 avitar-mt-4">Business Address</h3>
          </div>

          <div class="avitar-col-span-2">
            <label class="avitar-label">Street Address</label>
            <input
              type="text"
              class="avitar-input"
              value={{this.onboardingData.business_info.address.street}}
              {{on "input" (fn this.updateOnboardingNestedField "business_info.address" "street")}}
              placeholder="123 Main Street"
            />
          </div>

          <div>
            <label class="avitar-label">City</label>
            <input
              type="text"
              class="avitar-input"
              value={{this.onboardingData.business_info.address.city}}
              {{on "input" (fn this.updateOnboardingNestedField "business_info.address" "city")}}
              placeholder="Springfield"
            />
          </div>

          <div>
            <label class="avitar-label">State</label>
            <input
              type="text"
              class="avitar-input"
              value={{this.onboardingData.business_info.address.state}}
              {{on "input" (fn this.updateOnboardingNestedField "business_info.address" "state")}}
              placeholder="MA"
              maxlength="2"
            />
          </div>

          <div>
            <label class="avitar-label">ZIP Code</label>
            <input
              type="text"
              class="avitar-input"
              value={{this.onboardingData.business_info.address.zip}}
              {{on "input" (fn this.updateOnboardingNestedField "business_info.address" "zip")}}
              placeholder="01234"
            />
          </div>

          <div>
            <label class="avitar-label">Business Phone</label>
            <input
              type="tel"
              class="avitar-input"
              value={{this.onboardingData.business_info.phone}}
              {{on "input" (fn this.updateOnboardingNestedField "business_info" "phone")}}
              placeholder="(555) 123-4567"
            />
          </div>

          <div class="avitar-col-span-2">
            <label class="avitar-label">Business Email</label>
            <input
              type="email"
              class="avitar-input"
              value={{this.onboardingData.business_info.email}}
              {{on "input" (fn this.updateOnboardingNestedField "business_info" "email")}}
              placeholder="contact@company.com"
            />
          </div>
        </div>
      </div>

      <div class="avitar-card__footer avitar-flex avitar-justify-between avitar-items-center">
        <button
          type="button"
          class="avitar-btn avitar-btn--secondary"
          {{on "click" this.previousOnboardingStep}}
        >
          <i class="fas fa-arrow-left avitar-mr-2"></i>
          Back to Plan Selection
        </button>

        <div class="avitar-flex avitar-items-center avitar-gap-4">
          {{#unless this.canCreateProfile}}
            <div class="avitar-text-sm avitar-text-muted">
              <i class="fas fa-info-circle avitar-mr-1"></i>
              Please fill in all required fields (*)
            </div>
          {{/unless}}

          <button
            type="button"
            class="avitar-btn avitar-btn--primary avitar-btn--lg"
            {{on "click" this.createContractorProfile}}
            disabled={{or this.isCreatingProfile (not this.canCreateProfile)}}
          >
            {{#if this.isCreatingProfile}}
              <i class="fas fa-spinner fa-spin avitar-mr-2"></i>
              Creating Profile...
            {{else}}
              <i class="fas fa-check avitar-mr-2"></i>
              Create Profile & Continue
            {{/if}}
          </button>
        </div>
      </div>
    </div>
    {{/if}}

    {{! Return early - don't show verification form yet }}
    {{!-- Force early return by using nested if --}}
  {{else}}

  {{! Benefits Card }}
  <div class="avitar-card avitar-bg-primary-light avitar-border-primary avitar-mb-6">
    <div class="avitar-card__body avitar-p-4">
      <h2 class="avitar-text-lg avitar-font-semibold avitar-mb-3">
        <i class="fas fa-star avitar-mr-2 avitar-text-warning"></i>
        Benefits of Platform Verification
      </h2>
      <ul class="avitar-grid avitar-grid-cols-2 avitar-gap-3">
        <li class="avitar-flex avitar-items-start avitar-gap-2">
          <i class="fas fa-check-circle avitar-text-success avitar-mt-1"></i>
          <span>Fast-track permit approvals at participating municipalities</span>
        </li>
        <li class="avitar-flex avitar-items-start avitar-gap-2">
          <i class="fas fa-check-circle avitar-text-success avitar-mt-1"></i>
          <span>One-time verification for all municipalities</span>
        </li>
        <li class="avitar-flex avitar-items-start avitar-gap-2">
          <i class="fas fa-check-circle avitar-text-success avitar-mt-1"></i>
          <span>Verified badge on your permit applications</span>
        </li>
        <li class="avitar-flex avitar-items-start avitar-gap-2">
          <i class="fas fa-check-circle avitar-text-success avitar-mt-1"></i>
          <span>Valid for one year from approval date</span>
        </li>
      </ul>
    </div>
  </div>

  {{! Status Messages }}
  {{#if this.isApproved}}
    <div class="avitar-card avitar-bg-success-light avitar-border-success avitar-mb-6">
      <div class="avitar-card__body avitar-p-4">
        <h3 class="avitar-text-lg avitar-font-semibold avitar-mb-2">
          <i class="fas fa-check-circle avitar-mr-2"></i>
          Verification Approved!
        </h3>
        <p class="avitar-mb-2">
          Your contractor verification has been approved and is valid until
          {{date-format this.verification.expires_at "MMMM DD, YYYY"}}.
        </p>
        {{#if this.verification.review_notes}}
          <p class="avitar-text-sm avitar-text-muted">
            <strong>Reviewer Notes:</strong> {{this.verification.review_notes}}
          </p>
        {{/if}}
      </div>
    </div>
  {{else if this.isSubmitted}}
    <div class="avitar-card avitar-bg-info-light avitar-border-info avitar-mb-6">
      <div class="avitar-card__body avitar-p-4">
        <h3 class="avitar-text-lg avitar-font-semibold avitar-mb-2">
          <i class="fas fa-clock avitar-mr-2"></i>
          Application Under Review
        </h3>
        <p>
          Your verification application has been submitted and is currently being reviewed.
          You will be notified once a decision has been made.
        </p>
        <p class="avitar-text-sm avitar-text-muted avitar-mt-2">
          Submitted: {{date-format this.verification.submitted_at "MMMM DD, YYYY"}}
        </p>
      </div>
    </div>
  {{else if this.isRejected}}
    <div class="avitar-card avitar-bg-danger-light avitar-border-danger avitar-mb-6">
      <div class="avitar-card__body avitar-p-4">
        <h3 class="avitar-text-lg avitar-font-semibold avitar-mb-2">
          <i class="fas fa-times-circle avitar-mr-2"></i>
          Application Rejected
        </h3>
        <p class="avitar-mb-2">
          Your verification application was rejected for the following reason:
        </p>
        <p class="avitar-font-medium">{{this.verification.rejection_reason}}</p>
        {{#if this.verification.rejection_details}}
          <p class="avitar-text-sm avitar-mt-2">{{this.verification.rejection_details}}</p>
        {{/if}}
        <p class="avitar-text-muted avitar-mt-3">
          You can update your application and resubmit below.
        </p>
      </div>
    </div>
  {{else if this.isExpired}}
    <div class="avitar-card avitar-bg-warning-light avitar-border-warning avitar-mb-6">
      <div class="avitar-card__body avitar-p-4">
        <h3 class="avitar-text-lg avitar-font-semibold avitar-mb-2">
          <i class="fas fa-exclamation-triangle avitar-mr-2"></i>
          Verification Expired
        </h3>
        <p>
          Your verification expired on {{date-format this.verification.expires_at "MMMM DD, YYYY"}}.
          Please update your information and resubmit for verification.
        </p>
      </div>
    </div>
  {{/if}}

  {{! Application Form (only if can edit) }}
  {{#if this.canEdit}}
    <div class="avitar-card avitar-mb-6">
      <div class="avitar-card__header">
        <h2 class="avitar-card__title">
          <i class="fas fa-clipboard-list avitar-mr-2"></i>
          Verification Application
        </h2>
      </div>

      <div class="avitar-card__body">
        {{! Professional Licenses Section }}
        <div class="avitar-mb-6">
          <div class="avitar-flex avitar-justify-between avitar-items-center avitar-mb-4">
            <h3 class="avitar-text-lg avitar-font-semibold">
              Professional Licenses *
            </h3>
            <button
              type="button"
              class="avitar-btn avitar-btn--sm avitar-btn--primary"
              {{on "click" this.addLicense}}
            >
              <i class="fas fa-plus avitar-mr-2"></i>
              Add License
            </button>
          </div>

          {{#if this.licenses.length}}
            {{#each this.licenses as |license index|}}
              <div class="avitar-border avitar-rounded avitar-p-4 avitar-mb-4 avitar-bg-gray-50">
                <div class="avitar-flex avitar-justify-between avitar-items-start avitar-mb-4">
                  <h4 class="avitar-font-medium">License #{{add index 1}}</h4>
                  <button
                    type="button"
                    class="avitar-btn avitar-btn--sm avitar-btn--danger"
                    {{on "click" (fn this.removeLicense index)}}
                  >
                    <i class="fas fa-trash"></i>
                  </button>
                </div>

                <div class="avitar-grid avitar-grid-cols-2 avitar-gap-4">
                  <div>
                    <label class="avitar-label">License Type *</label>
                    <select
                      class="avitar-select"
                      value={{license.type}}
                      {{on "change" (fn this.updateLicense index "type")}}
                    >
                      <option value="">Select type...</option>
                      {{#each this.licenseTypeOptions as |licenseOption|}}
                        <option value={{licenseOption.value}} selected={{eq license.type licenseOption.value}}>
                          {{licenseOption.label}}
                        </option>
                      {{/each}}
                    </select>
                  </div>

                  <div>
                    <label class="avitar-label">License Number *</label>
                    <input
                      type="text"
                      class="avitar-input"
                      value={{license.license_number}}
                      {{on "input" (fn this.updateLicense index "license_number")}}
                      placeholder="Enter license number"
                    />
                  </div>

                  <div>
                    <label class="avitar-label">Issuing State *</label>
                    <select
                      class="avitar-select"
                      value={{license.issuing_state}}
                      {{on "change" (fn this.updateLicense index "issuing_state")}}
                    >
                      <option value="">Select state...</option>
                      {{#each this.stateOptions as |stateOption|}}
                        <option value={{stateOption.value}} selected={{eq license.issuing_state stateOption.value}}>
                          {{stateOption.label}}
                        </option>
                      {{/each}}
                    </select>
                  </div>

                  <div>
                    <label class="avitar-label">Expiration Date *</label>
                    <input
                      type="date"
                      class="avitar-input"
                      value={{license.expiration_date}}
                      {{on "change" (fn this.updateLicense index "expiration_date")}}
                    />
                  </div>

                  <div class="avitar-col-span-2">
                    <label class="avitar-label">License Document *</label>
                    <Shared::FileUpload
                      @label="Upload License Copy"
                      @accept="image/*,.pdf"
                      @maxSize={{10}}
                      @currentFile={{license.file}}
                      @onUpload={{fn this.handleLicenseFileUpload index}}
                      @required={{true}}
                    />
                  </div>
                </div>
              </div>
            {{/each}}
          {{else}}
            <div class="avitar-empty-state avitar-py-8">
              <i class="fas fa-id-card fa-3x avitar-text-muted avitar-mb-4"></i>
              <p class="avitar-text-muted">
                Click "Add License" to add your professional licenses
              </p>
            </div>
          {{/if}}
        </div>

        {{! Driver's License Section }}
        <div class="avitar-mb-6 avitar-border-t avitar-pt-6">
          <h3 class="avitar-text-lg avitar-font-semibold avitar-mb-4">
            Driver's License (ID Verification) *
          </h3>

          <div class="avitar-grid avitar-grid-cols-2 avitar-gap-4">
            <div>
              <label class="avitar-label">License Number *</label>
              <input
                type="text"
                class="avitar-input"
                value={{this.driversLicense.license_number}}
                {{on "input" (fn this.updateDriversLicense "license_number")}}
                placeholder="Enter license number"
              />
            </div>

            <div>
              <label class="avitar-label">Issuing State *</label>
              <select
                class="avitar-select"
                value={{this.driversLicense.issuing_state}}
                {{on "change" (fn this.updateDriversLicense "issuing_state")}}
              >
                <option value="">Select state...</option>
                {{#each this.stateOptions as |stateOption|}}
                  <option value={{stateOption.value}} selected={{eq this.driversLicense.issuing_state stateOption.value}}>
                    {{stateOption.label}}
                  </option>
                {{/each}}
              </select>
            </div>

            <div>
              <label class="avitar-label">Expiration Date *</label>
              <input
                type="date"
                class="avitar-input"
                value={{this.driversLicense.expiration_date}}
                {{on "change" (fn this.updateDriversLicense "expiration_date")}}
              />
            </div>

            <div class="avitar-col-span-2">
              <label class="avitar-label">Driver's License Photo *</label>
              <Shared::FileUpload
                @label="Upload Driver's License"
                @accept="image/*,.pdf"
                @maxSize={{10}}
                @currentFile={{this.driversLicense.file}}
                @onUpload={{this.handleDriversLicenseFileUpload}}
                @required={{true}}
              />
            </div>
          </div>
        </div>

        {{! Insurance Section }}
        <div class="avitar-border-t avitar-pt-6">
          <h3 class="avitar-text-lg avitar-font-semibold avitar-mb-4">
            Insurance Information (Optional)
          </h3>

          <div class="avitar-mb-4">
            <label class="avitar-flex avitar-items-center avitar-gap-2">
              <input
                type="checkbox"
                class="avitar-checkbox"
                checked={{this.insurance.has_insurance}}
                {{on "change" (fn this.updateInsurance "has_insurance")}}
              />
              <span>I have general liability insurance</span>
            </label>
          </div>

          {{#if this.insurance.has_insurance}}
            <div class="avitar-grid avitar-grid-cols-2 avitar-gap-4">
              <div>
                <label class="avitar-label">Policy Number</label>
                <input
                  type="text"
                  class="avitar-input"
                  value={{this.insurance.policy_number}}
                  {{on "input" (fn this.updateInsurance "policy_number")}}
                  placeholder="Enter policy number"
                />
              </div>

              <div>
                <label class="avitar-label">Provider</label>
                <input
                  type="text"
                  class="avitar-input"
                  value={{this.insurance.provider}}
                  {{on "input" (fn this.updateInsurance "provider")}}
                  placeholder="Insurance provider name"
                />
              </div>

              <div>
                <label class="avitar-label">Coverage Amount</label>
                <input
                  type="number"
                  class="avitar-input"
                  value={{this.insurance.coverage_amount}}
                  {{on "input" (fn this.updateInsurance "coverage_amount")}}
                  placeholder="Coverage amount"
                />
              </div>

              <div>
                <label class="avitar-label">Expiration Date</label>
                <input
                  type="date"
                  class="avitar-input"
                  value={{this.insurance.expiration_date}}
                  {{on "change" (fn this.updateInsurance "expiration_date")}}
                />
              </div>

              <div class="avitar-col-span-2">
                <label class="avitar-label">Insurance Certificate</label>
                <Shared::FileUpload
                  @label="Upload Insurance Certificate"
                  @accept="image/*,.pdf"
                  @maxSize={{10}}
                  @currentFile={{this.insurance.file}}
                  @onUpload={{this.handleInsuranceFileUpload}}
                />
              </div>
            </div>
          {{/if}}
        </div>
      </div>

      <div class="avitar-card__footer avitar-flex avitar-justify-between avitar-gap-3">
        <button
          type="button"
          class="avitar-btn avitar-btn--secondary"
          {{on "click" this.resetForm}}
          disabled={{this.isSaving}}
        >
          <i class="fas fa-undo avitar-mr-2"></i>
          Reset
        </button>

        <div class="avitar-flex avitar-gap-3">
          <button
            type="button"
            class="avitar-btn avitar-btn--outline-primary"
            {{on "click" this.saveDraft}}
            disabled={{this.isSaving}}
          >
            {{#if this.isSaving}}
              <i class="fas fa-spinner fa-spin avitar-mr-2"></i>
              Saving...
            {{else}}
              <i class="fas fa-save avitar-mr-2"></i>
              Save Draft
            {{/if}}
          </button>

          <button
            type="button"
            class="avitar-btn avitar-btn--primary"
            {{on "click" this.submitForReview}}
            disabled={{or (not this.canSubmit) this.isLoading}}
          >
            {{#if this.isLoading}}
              <i class="fas fa-spinner fa-spin avitar-mr-2"></i>
              Submitting...
            {{else}}
              <i class="fas fa-paper-plane avitar-mr-2"></i>
              Submit for Review
            {{/if}}
          </button>
        </div>
      </div>
    </div>
  {{else}}
    {{! View-only mode for submitted applications }}
    <div class="avitar-card">
      <div class="avitar-card__header">
        <h2 class="avitar-card__title">
          <i class="fas fa-clipboard-list avitar-mr-2"></i>
          Application Details
        </h2>
      </div>

      <div class="avitar-card__body">
        <div class="avitar-mb-6">
          <h3 class="avitar-text-lg avitar-font-semibold avitar-mb-4">
            Professional Licenses
          </h3>
          {{#each this.verification.licenses as |license|}}
            <div class="avitar-border avitar-rounded avitar-p-4 avitar-mb-3">
              <div class="avitar-grid avitar-grid-cols-2 avitar-gap-3">
                <div>
                  <span class="avitar-text-muted avitar-text-sm">Type:</span>
                  <p class="avitar-font-medium">{{license.type}}</p>
                </div>
                <div>
                  <span class="avitar-text-muted avitar-text-sm">Number:</span>
                  <p class="avitar-font-medium">{{license.license_number}}</p>
                </div>
                <div>
                  <span class="avitar-text-muted avitar-text-sm">State:</span>
                  <p class="avitar-font-medium">{{license.issuing_state}}</p>
                </div>
                <div>
                  <span class="avitar-text-muted avitar-text-sm">Expires:</span>
                  <p class="avitar-font-medium">{{date-format license.expiration_date "MMM DD, YYYY"}}</p>
                </div>
              </div>
            </div>
          {{/each}}
        </div>

        <div class="avitar-border-t avitar-pt-6">
          <h3 class="avitar-text-lg avitar-font-semibold avitar-mb-4">
            Driver's License
          </h3>
          <div class="avitar-grid avitar-grid-cols-3 avitar-gap-4">
            <div>
              <span class="avitar-text-muted avitar-text-sm">Number:</span>
              <p class="avitar-font-medium">{{this.verification.drivers_license.license_number}}</p>
            </div>
            <div>
              <span class="avitar-text-muted avitar-text-sm">State:</span>
              <p class="avitar-font-medium">{{this.verification.drivers_license.issuing_state}}</p>
            </div>
            <div>
              <span class="avitar-text-muted avitar-text-sm">Expires:</span>
              <p class="avitar-font-medium">{{date-format this.verification.drivers_license.expiration_date "MMM DD, YYYY"}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  {{/if}}
  {{/if}}
</div>
