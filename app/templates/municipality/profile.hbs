{{page-title "My Account"}}

<div class="avitar-container avitar-py-6 avitar-m-4">
  {{! Header }}
  <div class="avitar-mb-6">
    <h1 class="avitar-text-3xl avitar-font-bold avitar-mb-2">
      {{{lnr-icon "user" class="avitar-mr-2"}}}
      My Account
    </h1>
    <p class="avitar-text-muted">
      Manage your account settings and preferences
    </p>
  </div>

  <div class="avitar-grid avitar-grid-cols-2 avitar-gap-6">
    {{! Profile Information }}
    <div class="avitar-card">
      <div class="avitar-card__header">
        <h2 class="avitar-card__title">
          {{{lnr-icon "user" class="avitar-mr-2"}}}
          Profile Information
        </h2>
      </div>
      <div class="avitar-card__body">
        <div class="avitar-space-y-4">
          <div>
            <label class="avitar-label">Name</label>
            <div class="avitar-text-lg avitar-font-semibold">
              {{this.model.user.first_name}} {{this.model.user.last_name}}
            </div>
          </div>
          <div>
            <label class="avitar-label">Email</label>
            <div class="avitar-text-lg">
              {{this.model.user.email}}
            </div>
          </div>
          <div>
            <label class="avitar-label">Account Type</label>
            <div>
              {{#if this.model.isContractor}}
                <span class="avitar-badge avitar-badge--primary">Contractor</span>
              {{else if this.model.isCitizen}}
                <span class="avitar-badge avitar-badge--secondary">Citizen</span>
              {{else}}
                <span class="avitar-badge">{{this.model.user.global_role}}</span>
              {{/if}}
            </div>
          </div>
        </div>
      </div>
    </div>

    {{! Contractor Details (if applicable) }}
    {{#if this.model.contractor}}
      <div class="avitar-card">
        <div class="avitar-card__header">
          <h2 class="avitar-card__title">
            {{{lnr-icon "briefcase" class="avitar-mr-2"}}}
            Business Information
          </h2>
        </div>
        <div class="avitar-card__body">
          <div class="avitar-space-y-4">
            <div>
              <label class="avitar-label">Company Name</label>
              <div class="avitar-text-lg avitar-font-semibold">
                {{this.model.contractor.company_name}}
              </div>
            </div>
            {{#if this.model.contractor.license_number}}
              <div>
                <label class="avitar-label">License Number</label>
                <div class="avitar-text-lg">
                  {{this.model.contractor.license_number}}
                </div>
              </div>
            {{/if}}
            {{#if this.model.contractor.phone}}
              <div>
                <label class="avitar-label">Phone</label>
                <div class="avitar-text-lg">
                  {{this.model.contractor.phone}}
                </div>
              </div>
            {{/if}}
          </div>
        </div>
      </div>
    {{/if}}

    {{! Quick Links }}
    <div class="avitar-card {{unless this.model.contractor 'avitar-col-span-2'}}">
      <div class="avitar-card__header">
        <h2 class="avitar-card__title">
          {{{lnr-icon "pointer-right" class="avitar-mr-2"}}}
          Quick Links
        </h2>
      </div>
      <div class="avitar-card__body">
        <div class="avitar-space-y-3">
          {{#if this.model.isContractor}}
            <LinkTo @route="contractor-management" class="avitar-flex avitar-items-center avitar-gap-3 avitar-p-3 avitar-rounded avitar-bg-gray-50 hover:avitar-bg-gray-100">
              <div class="avitar-icon-wrapper avitar-bg-primary-light avitar-text-primary">
                {{{lnr-icon "apartment"}}}
              </div>
              <div>
                <div class="avitar-font-semibold">Contractor Management</div>
                <div class="avitar-text-sm avitar-text-muted">Manage team, subscription, and business settings</div>
              </div>
            </LinkTo>
          {{/if}}

          <LinkTo @route="my-permits" class="avitar-flex avitar-items-center avitar-gap-3 avitar-p-3 avitar-rounded avitar-bg-gray-50 hover:avitar-bg-gray-100">
            <div class="avitar-icon-wrapper avitar-bg-info-light avitar-text-info">
              {{{lnr-icon "license"}}}
            </div>
            <div>
              <div class="avitar-font-semibold">My Permits</div>
              <div class="avitar-text-sm avitar-text-muted">View and manage your permit applications</div>
            </div>
          </LinkTo>
        </div>
      </div>
    </div>
  </div>
</div>
